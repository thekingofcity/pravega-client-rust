<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Python Bindings - Pravega Native Client</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
        <!-- MathJax -->
        <script async type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quickStart.html"><strong aria-hidden="true">2.</strong> QuickStart</a></li><li class="chapter-item expanded "><a href="../Rust/index.html"><strong aria-hidden="true">3.</strong> Rust Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Rust/EventClient.html"><strong aria-hidden="true">3.1.</strong> Event Client</a></li><li class="chapter-item expanded "><a href="../Rust/ByteClient.html"><strong aria-hidden="true">3.2.</strong> Byte Client</a></li><li class="chapter-item expanded "><a href="../Rust/contribution.html"><strong aria-hidden="true">3.3.</strong> Developer Corner</a></li></ol></li><li class="chapter-item expanded "><a href="../Python/index.html"><strong aria-hidden="true">4.</strong> Python Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Python/PythonBindings.html" class="active"><strong aria-hidden="true">4.1.</strong> Python Bindings</a></li><li class="chapter-item expanded "><a href="../Python/contribution.html"><strong aria-hidden="true">4.2.</strong> Developer Corner</a></li></ol></li><li class="chapter-item expanded "><a href="../Nodejs/index.html"><strong aria-hidden="true">5.</strong> Nodejs Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../Nodejs/NodejsBindings.html"><strong aria-hidden="true">5.1.</strong> Nodejs Bindings</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Pravega Native Client</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#python-binding" id="python-binding">Python Binding</a></h1>
<p>The below section provides a Pravega Python API tutorial for the Rust based Pravega Native client. This tutorial is a 
companion to <a href="../python/pravega_client.html">Pravega Python API</a></p>
<p>Also, check out the <a href="https://github.com/pravega/pravega-client-rust/tree/master/python">repo</a>.</p>
<h2><a class="header" href="#streammanager" id="streammanager">StreamManager</a></h2>
<p>A StreamManger is used to create a Scopes, Streams, Writers and Readers. It can also be used to perform
operations on the stream which include sealing a stream and deleting streams among others.</p>
<p>A StreamManager can be created by using a Controller URI. The below example snippet </p>
<pre><code class="language-python">import pravega_client
manager=pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# stream manager can be used to create scopes, streams, writers and readers against Pravega.
manager.create_scope(&quot;scope&quot;)
manager.create_stream(&quot;scope&quot;, &quot;stream&quot;, 1)
</code></pre>
<p>A StreamWriter can be used create a Stream writer. The below snippet is shows a sample pattern.</p>
<pre><code class="language-python">import pravega_client
manager=pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# create a writer against an already created Pravega scope and Stream.
writer=manager.create_writer(&quot;scope&quot;, &quot;stream&quot;)
</code></pre>
<p>A transactional Writer can be created using the StreamManager. The below example snippet shows a sample pattern.</p>
<pre><code class="language-python"> import pravega_client
 manager=pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# create a transactional writer against an already created Pravega scope and Stream.
 writer=manager.create_transaction_writer(&quot;scope&quot;, &quot;stream&quot;, &quot;123&quot;)
</code></pre>
<p>A ReaderGroup can be created using the StreamManager. Individual readers can be created using this ReaderGroup object.</p>
<pre><code class="language-python">import pravega_client
manager=pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# create a ReaderGroup rg1 against an already created Pravega scope and Stream.
event.reader_group=manager.create_reader_group(&quot;rg1&quot;, &quot;scope&quot;, &quot;stream&quot;)
</code></pre>
<h2><a class="header" href="#streamwriter" id="streamwriter">StreamWriter</a></h2>
<p>A StreamWriter object created using the StreamManager can be used to write events into the Pravega Stream. The events 
that are written will appear in the Stream exactly once. The event of type String is converted into bytes with <code>UTF-8</code> encoding.
The user can optionally specify the routing key. The StreamWriter can also write a byte array into the Pravega Stream 
with/without a routing key.</p>
<p>Note that the implementation provides retry logic to handle connection failures and service host failures. Internal 
retries will not violate the exactly-once semantic, so it is better to rely on them than to wrap this with custom retry logic.</p>
<pre><code class="language-python">import pravega_client
manager=pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# assuming the Pravega scope and stream are already created.
writer=manager.create_writer(&quot;scope&quot;, &quot;stream&quot;)
# write into Pravega stream without specifying the routing key.
writer.write_event(&quot;e1&quot;)
# write into Pravega stream by specifying the routing key.
writer.write_event(&quot;e2&quot;, &quot;key1&quot;) 
e=&quot;eventData&quot;                                                   
# convert the event object to a byte array.
e_bytes=e.encode(&quot;utf-8&quot;)                                       
# write into Pravega stream without specifying the routing key.    
writer.write_event_bytes(e_bytes)                                    
# write into Pravega stream by specifying the routing key.       
writer.write_event_bytes(e_bytes, &quot;key1&quot;)    
</code></pre>
<h2><a class="header" href="#transactionwriter" id="transactionwriter">TransactionWriter</a></h2>
<p>A TransactionWriter created using a StreamManager  writes Events to an Event stream transactionally. All events that are 
written as part of a transaction can be committed atomically by calling commit(). This will result in either all of those 
events going into the stream or none of them and the commit call failing with an exception.</p>
<p>Prior to committing a transaction, the events written to it cannot be read or otherwise seen by readers.</p>
<pre><code class="language-python">import pravega_client                                         
manager = pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)        
w1 = stream_manager.create_transaction_writer(scope,&quot;testTxn&quot;, 1)
# Begin a Transaction
txn1 = w1.begin_txn()
txn1.write_event(&quot;test event1&quot;)
txn1.write_event(&quot;test event2&quot;)
self.assertTrue(txn1.is_open(), &quot;Transaction is open&quot;)
# Commit a Transaction
txn1.commit()
                      
txn2 = w1.begin_txn()
txn2.write_event(&quot;test event1&quot;)
txn2.write_event(&quot;test event2&quot;)
self.assertTrue(txn2.is_open(), &quot;Transaction is open&quot;)
# Abort a transaction, none of the events will be written into the Stream.
txn2.abort()
</code></pre>
<h2><a class="header" href="#eventreader" id="eventreader">EventReader</a></h2>
<p>One or more EventReaders can be created from the ReaderGroup object created using the StreamManager. Every reader has 
an async method call <code>reader.get_segment_slice_async()</code> that returns a Python Future which completes when a segment slice 
is acquired for consumption.  It can contain one or more events and the user can iterate over the segment slice to read 
the events. If there are multiple segments in the stream then this API can return a segment slice of any segments in the
stream. The reader ensures that events returned by the stream are in order.</p>
<p>If multiple readers are created under the same reader group then the readers co-ordinate amongst themselves and divide 
the responsibility of reading from different segments in the Pravega stream.</p>
<p>A sample example snippet is shown below.</p>
<pre><code class="language-python">import pravega_client
manager = pravega_client.StreamManager(&quot;tcp://127.0.0.1:9090&quot;)
# assuming the Pravega scope and stream are already created.
reader_group = manager.create_reader_group(&quot;rg1&quot;, &quot;scope&quot;, &quot;stream&quot;)
reader = reader_group.create_reader(&quot;reader_id&quot;);
slice = await reader.get_segment_slice_async()
for event in slice:
    print(event.data())
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../Python/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../Python/contribution.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../Python/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../Python/contribution.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        
        <script type="text/javascript">
            window.playground_line_numbers = true;
        </script>
        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        
        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../editor.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mode-rust.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-dawn.js" type="text/javascript" charset="utf-8"></script>
        <script src="../theme-tomorrow_night.js" type="text/javascript" charset="utf-8"></script>
        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
